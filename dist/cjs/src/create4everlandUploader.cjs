"use strict";var e=require("../_virtual/_rollupPluginBabelHelpers.cjs"),r=require("../node_modules/tslib/tslib.es6.cjs"),n=require("../node_modules/@aws-sdk/client-s3/dist-es/S3Client.cjs"),t=require("../node_modules/@metaplex-foundation/umi/dist/esm/GenericFile.cjs"),a=require("../node_modules/@metaplex-foundation/umi/dist/esm/Amount.cjs"),u=require("../node_modules/@aws-sdk/client-s3/dist-es/commands/HeadObjectCommand.cjs"),o=require("../node_modules/@aws-sdk/client-s3/dist-es/commands/PutObjectCommand.cjs");exports.create4everlandUploader=function(s,i){var c=this,d=new n.S3Client({endpoint:"https://endpoint.4everland.co",credentials:s,region:"eu-west-2"}),m=function(n){return r.__awaiter(c,void 0,void 0,e.regeneratorRuntime().mark((function r(){var t,a,s,c,m,p,l;return e.regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new o.PutObjectCommand({Bucket:i,Key:n.uniqueName,Body:n.buffer,ContentType:n.contentType||void 0}),e.next=3,d.send(t);case 3:return a=e.sent,s=new u.HeadObjectCommand({Bucket:i,Key:n.uniqueName}),e.next=7,d.send(s);case 7:if(c=e.sent,m=c.Metadata,!(p=m["arweave-hash"])){e.next=12;break}return e.abrupt("return",p);case 12:return l="",a.ETag&&(l=JSON.parse(a.ETag)),e.abrupt("return",l);case 15:case"end":return e.stop()}}),r)})))},p=function(n){return r.__awaiter(c,void 0,void 0,e.regeneratorRuntime().mark((function r(){return e.regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(n.map((function(e){return m(e)}))));case 1:case"end":return e.stop()}}),r)})))};return{upload:p,uploadJson:function(n){return r.__awaiter(c,void 0,void 0,e.regeneratorRuntime().mark((function r(){var a,u;return e.regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.createGenericFileFromJson(n),e.next=3,p([a]);case 3:return u=e.sent,e.abrupt("return",u[0]);case 5:case"end":return e.stop()}}),r)})))},getUploadPrice:function(){return r.__awaiter(c,void 0,void 0,e.regeneratorRuntime().mark((function r(){return e.regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.lamports(0));case 1:case"end":return e.stop()}}),r)})))}}};
